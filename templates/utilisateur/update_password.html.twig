{% extends 'base.html.twig' %}

{% block title %}Mon Profile{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('profil') }}
{% endblock %}

{% block body %}

{#    {% for message in app.flashes('error') %}#}
{#        <div class="alert alert-error" role="alert">#}
{#            {{ message }}#}
{#        </div>#}
{#    {% endfor %}#}

    <div class="card mb-3" style="width: 80% ; padding: 8px;">
        <div class="row g-0">
            <h2 class="mb-4">Mon profile</h2>
            <div class="card-body">
                {{ form_start(form, {'attr': {'class': 'form-signin needs-validation',
                        'novalidate': 'novalidate',
                        'oninput': 'if (' ~ form.currentPassword.vars.id ~
                        '.value !== "" && ' ~ form.password.first.vars.id ~
                        '.value !== "" && ' ~ form.password.first.vars.id ~
                        '.value !== ' ~ form.password.second.vars.id ~ '.value) ' ~ form.password.second.vars.id ~
                        '.setCustomValidity("Les mots de passe ne correspondent pas."); else ' ~ form.password.second.vars.id ~
                        '.setCustomValidity("");' }}) }}

                <div class="form-group">
                    <label for="{{ form.currentPassword.vars.id }}">{{ form.currentPassword.vars.label }}</label>
                    {{ form_widget(form.currentPassword, {'attr': {
                                'autocomplete': 'off',
                                'class': 'form-control',
                                'aria-describedby': 'inputGroupPrepend',
                                'required': 'required'}}) }}
                    <div class="invalid-feedback">
                        Veuillez saisir votre mot de passe actuel.
                    </div>
                </div>

                <div class="col-4">
                    <div class="form-group">
                        <label for="{{ form.password.first.vars.id }}">{{ form.password.first.vars.label }}</label>
                        <div class="input-group">
                            {{ form_widget(form.password.first, {'attr': {
                                        'autocomplete': 'off',
                                        'class': 'form-control',
                                        'aria-describedby': 'inputGroupPrepend',
                                        'required': 'required'}}) }}
                            <div class="invalid-feedback">
                                Veuillez saisir votre nouveau mot de passe.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-4">
                    <div class="form-group">
                        <label for="{{ form.password.second.vars.id }}">{{ form.password.second.vars.label }}</label>
                        <div class="input-group">
                            {{ form_widget(form.password.second, {'attr': {
                                        'autocomplete': 'off',
                                        'class': 'form-control form-control-sm',
                                        'aria-describedby': 'inputGroupPrepend',
                                        'required': 'required'}}) }}
                            <div class="invalid-feedback">
                                Les mots de passe ne correspondent.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm" style="text-align: center">
                    <button class="btn btn-success" type="submit">Enregistrer</button>
                    <a href="{{ path('app_utilisateur_modifier') }}" class="btn btn-secondary">Annuler</a>
                </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
{% endblock %}

